{{ $result := transform.HighlightCodeBlock . }}
{{- $id := dict "Scratch" .Page.Scratch | partial "function/id.html" -}}

<div class="highlight is-open tw-group" id="highlight-{{ $id }}">
  <div class="tw-flex tw-flex-row tw-justify-between tw-w-full" >
    <div class="tw-w-full" onclick="toggleCodeblock('{{ $id }}')">
      <p class="tw-select-none">{{ .Type | default "text" }}</p>
    </div>
    <div class="tw-flex">
      <button class="tw-select-none tw-mx-2 tw-hidden group-[.is-open]:tw-block group-[.is-wrap]:tw-text-doit-blue-light dark:group-[.is-wrap]:tw-text-doit-blue-dark print:!tw-hidden" aria-label="Toggle code wrap" id="wrap-code-{{ $id }}" onclick="toggleCodeblockWrap('{{ $id }}')">{{ partial "plugin/fontawesome.html" (dict "Style" "solid" "Icon" "bars") }}</button><button class="tw-select-none tw-mx-2 tw-hidden group-[.is-open]:tw-block hover:tw-text-doit-blue-light dark:hover:tw-text-doit-blue-dark print:!tw-hidden" id="copy-code-{{ $id }}" onclick="copyCode('{{ $id }}')">{{ partial "plugin/fontawesome.html" (dict "Style" "regular" "Icon" "copy") }}</button><button disabled class="tw-select-none tw-mx-2 tw-block group-[.is-open]:tw-hidden print:!tw-hidden" id="copy-code-{{ $id }}">{{ partial "plugin/fontawesome.html" (dict "Style" "solid" "Icon" "ellipsis-h") }}</button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block"><code id="codeblock-{{ $id }}" class="chroma !tw-block tw-transition-[max-height] tw-duration-500 tw-ease-in-out">{{ $result.Inner }}</code></pre>
</div>

<script>
  var codeblock = document.getElementById('codeblock-{{ $id }}');
  codeblock.style.maxHeight = codeblock.scrollHeight + 10 + 'px';
</script>