{{/*  Update the global config map so the JavaScript dependency will be loaded  */}}
{{- .Page.Scratch.SetInMap "this" "tabs" true -}}
{{/*  Get all children tabs  */}}
{{- $tabs := .Scratch.Get "tabs" -}}
{{- $lenTabs := len $tabs -}}
{{/*  Load the defaultTab config  */}}
{{- $defaultTab := .Get "defaultTab" | default 0 -}}
{{- if ge $defaultTab $lenTabs -}}
    {{- errorf "defaultTab index out of range. The number of tabs is %d, but got index %s. The index should be between 0 and length - 1. See %s %s" $lenTabs $defaultTab .Name .Position -}}
{{- end -}}

<tab-container default-tab="{{ $defaultTab }}">
  {{- range $index, $tab := $tabs -}}
      {{- $title := $tab.title -}}
      {{- $id := $tab.id -}}
      {{- $tabindex := 0 -}}
      {{- if ne $index 0 -}}
          {{- $tabindex = -1 -}}
      {{- end -}}
      <button class="
        tab-button tw-border-red-600 tw-border-2 tw-rounded tw-border-b-0 tw-rounded-b-none tw-bg-white tw-px-4 tw-py-2 aria-selected:tw-bg-blue-400 dark:tw-bg-black dark:aria-selected:tw-bg-slate-500"  
        type="button" 
        role="tab" 
        id="tab-{{- $id -}}">
          {{- $title -}}
      </button>
  {{ end }}
  {{- .Inner -}}
</tab-container>
