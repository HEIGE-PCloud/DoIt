'use strict';var Pjax=function(){async function D(a,{selectors:b,switches:c,signal:d=null}){if(null!=d&&d.aborted)throw new DOMException("Aborted switches","AbortError");let e=!1,g=[];b.forEach(h=>{let l=a.querySelectorAll(h),k=document.querySelectorAll(h);if(l.length!==k.length)throw new DOMException(`Selector '${h}' does not select the same amount of nodes`,"IndexSizeError");let {activeElement:f}=document;k.forEach((n,p)=>{!e&&f&&n.contains(f)&&((f instanceof HTMLElement||f instanceof SVGElement)&&
    f.blur(),e=!0);let q=(null==c?void 0:c[h])||v.default,r=Promise.resolve().then(()=>q(n,l[p])).catch(()=>{});g.push(r)})});await Promise.race([Promise.all(g),new Promise((h,l)=>{null==d?void 0:d.addEventListener("abort",()=>{l(new DOMException("Aborted switches","AbortError"))})})]);return{focusCleared:e}}async function E(a,b={}){var c,d;let {selectors:e,switches:g,cache:h,timeout:l,hooks:k}={...this.options,...b},f={},n=(null==(c=this.abortController)?void 0:c.signal)||null;f.signal=n;c={cache:h,
    signal:n};a instanceof Request&&(c.referrer=a.referrer,c.referrerPolicy=a.referrerPolicy);a=new Request(a,c);a.headers.set("X-Requested-With","Fetch");a.headers.set("X-Pjax","true");a.headers.set("X-Pjax-Selectors",JSON.stringify(e));a=await (null==(d=k.request)?void 0:d.call(k,a))||a;f.request=a;f.timeout=l;let p;0<l&&(p=window.setTimeout(()=>{var m;null==(m=this.abortController)?void 0:m.abort()},l),f.timeoutID=p);this.fire("send",f);try{var q,r,w;let m=await fetch(a).finally(()=>{window.clearTimeout(p)}),
    t=await (null==(q=k.response)?void 0:q.call(k,m))||m;f.response=t;this.fire("receive",f);let u=new URL(t.url);u.hash=(new URL(a.url)).hash;window.location.href!==u.href&&window.history.pushState(null,"",u.href);let x=(new DOMParser).parseFromString(await t.text(),"text/html"),F=await (null==(r=k.document)?void 0:r.call(k,x))||x;f.switches=g;let y=await D(F,{selectors:e,switches:g,signal:n}),z=await (null==(w=k.switchesResult)?void 0:w.call(k,y))||y;f.switchesResult=z;await this.preparePage(z,b)}catch(m){throw f.error=
    m,this.fire("error",f),m;}finally{this.fire("complete",f)}this.fire("success",f)}async function G(a,{signal:b=null}={}){if(null!=b&&b.aborted)throw new DOMException("Aborted execution","AbortError");a=Array.from(a,d=>new H(d)).filter(d=>d.evaluable);let c=new I(b);a=a.reduce((d,e)=>e.external?Promise.all([d,c.exec(e)]):d.then(()=>c.exec(e)),Promise.resolve());await Promise.race([a,new Promise((d,e)=>{null==b?void 0:b.addEventListener("abort",()=>{e(new DOMException("Aborted execution","AbortError"))})})])}
    async function J(a,b={}){b={...this.options,...b};if(a){var c;if(a.focusCleared){let e=document.querySelectorAll("[autofocus]")[0];(e instanceof HTMLElement||e instanceof SVGElement)&&e.focus()}let d=[];b.scripts&&document.querySelectorAll(b.scripts).forEach(e=>{e instanceof HTMLScriptElement&&d.push(e)});b.selectors.forEach(e=>{document.querySelectorAll(e).forEach(g=>{g instanceof HTMLScriptElement?d.push(g):g.querySelectorAll("script").forEach(h=>{d.includes(h)||d.push(h)})})});d.sort((e,g)=>e.compareDocumentPosition(g)&
    Node.DOCUMENT_POSITION_PRECEDING||-1);await G(d,{signal:(null==(c=this.abortController)?void 0:c.signal)||null})}({scrollTo:c}=b);if(!1!==c){a=a?[0,0]:!1;if(Array.isArray(c))a=c;else if("number"===typeof c)a=[window.scrollX,c];else if(c=K())c.scrollIntoView(),a=!1;a&&window.scrollTo(a[0],a[1])}}async function L(a,b={}){var c;this.storeHistory();let d=new AbortController;null==(c=this.abortController)?void 0:c.abort();this.abortController=d;c=new URL("string"===typeof a?a:a.url,document.baseURI);c.pathname+
    c.search===this.location.pathname+this.location.search&&c.href.includes("#")?(window.location.hash!==c.hash&&window.history.pushState(null,"",c.href),await this.preparePage(null,b)):await this.switchDOM(a,b);this.history.pull();this.location.href=window.location.href;this.abortController=null}class M{constructor(a){this.key=a;this.pull()}pull(){let a=window.history.state,b=null==a?void 0:a[this.key];if(void 0===b||this.index!==b){var c=window.sessionStorage.getItem(this.key),d=c?JSON.parse(c):[];
    d[this.index]=this.state;window.sessionStorage.setItem(this.key,JSON.stringify(d));void 0===b?(this.index=d.length,this.state=null,window.history.replaceState({...a,[this.key]:this.index},document.title)):(this.index=b,this.state=c?d[b]:null)}}}let A=(a,b)=>{a.replaceWith(b)},v={default:A,innerHTML:(a,b)=>{a.innerHTML=b.innerHTML},textContent:(a,b)=>{a.textContent=b.textContent},innerText:(a,b)=>{a.innerText=b.innerText},attributes:(a,b)=>{let c=a.getAttributeNames();b.getAttributeNames().forEach(d=>
    {a.setAttribute(d,b.getAttribute(d)||"");c=c.filter(e=>e!==d)});c.forEach(d=>{a.removeAttribute(d)})},replaceWith:A};class N{constructor(a,b){this.form=a;this.submitButton=b}getAttribute(a){let {submitButton:b,form:c}=this;if(b&&b.hasAttribute(`form${a}`)){var d=`${a.charAt(0).toUpperCase()}${a.slice(1)}`;if(d=b[`form${d}`])return d}return c[a]}getEntryList(){let {form:a,submitButton:b}=this,c=new FormData(a);b&&!b.disabled&&b.name&&c.append(b.name,b.value);return c}getNameValuePairs(){return Array.from(this.getEntryList(),
    ([a,b])=>[a,b instanceof File?b.name:b])}getURLSearchParams(){return new URLSearchParams(this.getNameValuePairs())}getTextPlain(){return this.getNameValuePairs().reduce((a,[b,c])=>`${a}${b}=${c}\r\n`,"")}getRequestInfo(){let a=this.getAttribute("action");var b=new URL(a,document.baseURI);if(!/^https?:$/.test(b.protocol))return null;switch(this.getAttribute("method")){case "get":return b.search=this.getURLSearchParams().toString(),b.href;case "post":switch(this.getAttribute("enctype")){case "application/x-www-form-urlencoded":b=
    this.getURLSearchParams();break;case "multipart/form-data":b=this.getEntryList();break;case "text/plain":b=this.getTextPlain();break;default:return null}return new Request(a,{method:"POST",body:b});default:return null}}}let B=a=>{if(a===window.name)return window;switch(a.toLowerCase()){case "":case "_self":return window;case "_parent":return window.parent;case "_top":return window.top}};class O{constructor(a){this.pjax=a}test(a){let {defaultTrigger:b}=this.pjax.options;if("boolean"===typeof b)return b;
    let {enable:c,exclude:d}=b;return!1!==c&&(!d||!a.matches(d))}load(a,b){var c,d;let e={},g=null==(c=b.getAttribute("referrerpolicy"))?void 0:c.toLowerCase();void 0!==g&&(e.referrerPolicy=g);null!=(d=b.getAttribute("rel"))&&d.split(/\s+/).some(h=>"noreferrer"===h.toLowerCase())&&(e.referrer="");this.pjax.load(new Request(a,e)).catch(()=>{})}onLinkOpen(a){if(!a.defaultPrevented){var {target:b}=a;if(b instanceof Element&&(b=b.closest("a[href], area[href]"))&&this.test(b)){if(a instanceof MouseEvent||
    a instanceof KeyboardEvent)if(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)return;B(b.target)===window&&b.origin===window.location.origin&&(a.preventDefault(),this.load(b.href,b))}}}onFormSubmit(a){if(!a.defaultPrevented){var {target:b,submitter:c}=a;if(b instanceof HTMLFormElement&&this.test(b)){var d=new N(b,c);B(d.getAttribute("target"))===window&&(d=d.getRequestInfo())&&(new URL("string"===typeof d?d:d.url)).origin===window.location.origin&&(a.preventDefault(),this.load(d,b))}}}register(){document.addEventListener("click",
    a=>{this.onLinkOpen(a)});document.addEventListener("keyup",a=>{if("Enter"===a.key)this.onLinkOpen(a)});"SubmitEvent"in window&&document.addEventListener("submit",a=>{this.onFormSubmit(a)})}}let P=/^((application|text)\/(x-)?(ecma|java)script|text\/(javascript1\.[0-5]|(j|live)script))$/;class H{constructor(a){this.evaluable=this.blocking=this.external=!1;this.target=a;if(a.hasAttribute("src")||a.text){var b=a.type?a.type.trim().toLowerCase():"text/javascript";if(P.test(b))this.type="classic";else if("module"===
    b)this.type="module";else return;a.noModule&&"classic"===this.type||(a.src&&(this.external=!0),this.blocking=!0,"classic"!==this.type?this.blocking=!1:this.external&&(a.hasAttribute("async")?this.blocking=!1:a.defer&&(this.blocking=!1)),this.evaluable=!0)}}eval(){return new Promise((a,b)=>{let c=this.target,d=document.createElement("script");d.addEventListener("error",b);d.async=!1;c.getAttributeNames().forEach(e=>{d.setAttribute(e,c.getAttribute(e)||"")});d.text=c.text;document.contains(c)?c.replaceWith(d):
    (document.head.append(d),this.external?d.addEventListener("load",()=>d.remove()):d.remove());this.external?d.addEventListener("load",()=>a()):a()})}}class I{constructor(a){this.signal=a}async exec(a){var b;if(null!=(b=this.signal)&&b.aborted)throw new DOMException("Execution aborted","AbortError");b=a.eval().catch(()=>{});a.blocking&&await b}}let K=()=>{let a=null;const b=decodeURIComponent(window.location.hash.slice(1));b&&(a=document.getElementById(b)||document.getElementsByName(b)[0]);a||b&&"top"!==
    b.toLowerCase()||(a=document.scrollingElement);return a};class C{static reload(){window.location.reload()}constructor(a={}){this.options={defaultTrigger:!0,selectors:["title",".pjax"],switches:{},scripts:"script[data-pjax]",scrollTo:!0,scrollRestoration:!0,cache:"default",timeout:0,hooks:{}};this.history=new M("pjax");this.location=new URL(window.location.href);this.abortController=null;this.switchDOM=E;this.preparePage=J;this.weakLoad=L;Object.assign(this.options,a);this.options.scrollRestoration&&
    (window.history.scrollRestoration="manual",window.addEventListener("beforeunload",()=>{window.history.scrollRestoration="auto"}));({defaultTrigger:a}=this.options);(!0===a||!1!==a&&!1!==a.enable)&&(new O(this)).register();window.addEventListener("popstate",b=>{this.storeHistory();this.history.pull();null!==b.state&&(b={},this.options.scrollRestoration&&this.history.state&&(b.scrollTo=this.history.state.scrollPos),this.load(window.location.href,b).catch(()=>{}))})}storeHistory(){this.history.state=
    {scrollPos:[window.scrollX,window.scrollY]}}fire(a,b){a=new CustomEvent(`pjax:${a}`,{bubbles:!0,cancelable:!1,detail:{abortController:this.abortController,...b}});document.dispatchEvent(a)}async load(a,b={}){try{await this.weakLoad(a,b)}catch(c){if(c instanceof DOMException&&"AbortError"===c.name)throw c;window.location.assign("string"===typeof a?a:a.url)}}}C.switches=v;return C}()
    //# sourceMappingURL=pjax.min.js.map